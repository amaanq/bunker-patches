From 2518307d2084dd57c564a0963b3dde61ccdb251a Mon Sep 17 00:00:00 2001
From: Amaan Qureshi <git@amaanq.com>
Date: Sun, 8 Feb 2026 14:08:45 -0500
Subject: [PATCH 53/194] mm: add missing extern declarations for le9 workingset
 protection sysctls

The le9 patch added sysctl entries to mm/util.c referencing variables
defined in mm/vmscan.c but the cherry-pick dropped the include/linux/mm.h
hunk with extern declarations. This causes build failures since util.c
cannot see the symbols at compile time.

Add extern declarations for sysctl_workingset_protection,
sysctl_anon_min_ratio, sysctl_clean_low_ratio, sysctl_clean_min_ratio,
and vm_workingset_protection_update_handler to include/linux/mm.h.

Matches CachyOS 0005-cachy.patch.
---
 include/linux/mm.h | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/include/linux/mm.h b/include/linux/mm.h
index 819daddd3a49..b0235f7661c1 100644
--- a/include/linux/mm.h
+++ b/include/linux/mm.h
@@ -206,10 +206,17 @@ static inline void __mm_zero_struct_page(struct page *page)
 extern int sysctl_max_map_count;
 
 extern unsigned long sysctl_user_reserve_kbytes;
 extern unsigned long sysctl_admin_reserve_kbytes;
 
+extern bool sysctl_workingset_protection;
+extern u8 sysctl_anon_min_ratio;
+extern u8 sysctl_clean_low_ratio;
+extern u8 sysctl_clean_min_ratio;
+int vm_workingset_protection_update_handler(const struct ctl_table *table,
+	int write, void __user *buffer, size_t *lenp, loff_t *ppos);
+
 #if defined(CONFIG_SPARSEMEM) && !defined(CONFIG_SPARSEMEM_VMEMMAP)
 bool page_range_contiguous(const struct page *page, unsigned long nr_pages);
 #else
 static inline bool page_range_contiguous(const struct page *page,
 		unsigned long nr_pages)
-- 
2.52.0

