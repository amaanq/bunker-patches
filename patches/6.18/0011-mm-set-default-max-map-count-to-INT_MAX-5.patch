From b8ddb17b2d97f7e060d079c21cbde4c2a9f88140 Mon Sep 17 00:00:00 2001
From: Steven Barrett <steven@liquorix.net>
Date: Thu, 27 Apr 2023 14:43:57 -0500
Subject: [PATCH 11/58] mm: set default max map count to (INT_MAX - 5)

---
 include/linux/mm.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/include/linux/mm.h b/include/linux/mm.h
index 7c79b3369b82..819daddd3a49 100644
--- a/include/linux/mm.h
+++ b/include/linux/mm.h
@@ -199,11 +199,11 @@ static inline void __mm_zero_struct_page(struct page *page)
  * ELF extended numbering allows more than 65535 sections, so 16-bit bound is
  * not a hard limit any more. Although some userspace tools can be surprised by
  * that.
  */
 #define MAPCOUNT_ELF_CORE_MARGIN	(5)
-#define DEFAULT_MAX_MAP_COUNT	(USHRT_MAX - MAPCOUNT_ELF_CORE_MARGIN)
+#define DEFAULT_MAX_MAP_COUNT	(INT_MAX - MAPCOUNT_ELF_CORE_MARGIN)
 
 extern int sysctl_max_map_count;
 
 extern unsigned long sysctl_user_reserve_kbytes;
 extern unsigned long sysctl_admin_reserve_kbytes;
-- 
2.52.0

